#!/bin/bash

while true; do
    clear
    echo "==========================================="
    echo "        QUáº¢N LÃ REALM PROXY - TLTVPN"
    echo "==========================================="
    echo " 1. CÃ i Ä‘áº·t chuyá»ƒn tiáº¿p Realm"
    echo " 2. Reload & Khá»Ÿi Ä‘á»™ng Realm"
    echo " 3. Kiá»ƒm tra tráº¡ng thÃ¡i Realm"
    echo " 4. Chá»‰nh sá»­a cáº¥u hÃ¬nh Realm"
    echo " 5. KÃ­ch hoáº¡t BBR tÄƒng tá»‘c máº¡ng"
    echo " 6. Äáº·t máº­t kháº©u má»›i cho VPS"
    echo " 0. ThoÃ¡t"
    echo "==========================================="
    read -p ">> Nháº­p lá»±a chá»n cá»§a báº¡n: " choice

    case "$choice" in
        1)
            echo "ğŸ”§ Äang tiáº¿n hÃ nh cÃ i Ä‘áº·t chuyá»ƒn tiáº¿p Realm..."
            bash -c "$(wget -qO- https://raw.githubusercontent.com/tanlaotaa/ct/refs/heads/main/tlt)"
            echo "âœ… CÃ i Ä‘áº·t hoÃ n táº¥t."
            read -p "Nháº¥n Enter Ä‘á»ƒ quay láº¡i menu..."
            ;;
        2)
            echo "ğŸ”„ Reload & khá»Ÿi Ä‘á»™ng Realm..."
            systemctl daemon-reload && systemctl enable --now realm && systemctl restart realm
            echo "âœ… Realm Ä‘Ã£ Ä‘Æ°á»£c reload vÃ  khá»Ÿi Ä‘á»™ng láº¡i."
            read -p "Nháº¥n Enter Ä‘á»ƒ quay láº¡i menu..."
            ;;
        3)
            echo "ğŸ“‹ Tráº¡ng thÃ¡i dá»‹ch vá»¥ Realm:"
            systemctl status realm
            read -p "Nháº¥n Enter Ä‘á»ƒ quay láº¡i menu..."
            ;;
        4)
            echo "âœï¸ Äang má»Ÿ cáº¥u hÃ¬nh Realm..."
            nano /root/realm.toml
            echo "ğŸ”„ Khá»Ÿi Ä‘á»™ng láº¡i Realm vá»›i cáº¥u hÃ¬nh má»›i..."
            systemctl restart realm
            echo "âœ… ÄÃ£ cáº­p nháº­t cáº¥u hÃ¬nh vÃ  restart Realm."
            read -p "Nháº¥n Enter Ä‘á»ƒ quay láº¡i menu..."
            ;;
        5)
            echo "ğŸš€ KÃ­ch hoáº¡t BBR tÄƒng tá»‘c máº¡ng..."
            modprobe tcp_bbr
            echo "tcp_bbr" | tee -a /etc/modules-load.d/modules.conf
            echo "net.core.default_qdisc=fq" | tee -a /etc/sysctl.conf
            echo "net.ipv4.tcp_congestion_control=bbr" | tee -a /etc/sysctl.conf
            sysctl -p
            echo "âœ… BBR Ä‘Ã£ Ä‘Æ°á»£c kÃ­ch hoáº¡t thÃ nh cÃ´ng."
            read -p "Nháº¥n Enter Ä‘á»ƒ quay láº¡i menu..."
            ;;

        0)
            echo "ğŸ‘‹ Cáº£m Æ¡n báº¡n Ä‘Ã£ sá»­ dá»¥ng. Háº¹n gáº·p láº¡i!"
            exit 0
            ;;
        *)
            echo "âŒ Lá»±a chá»n khÃ´ng há»£p lá»‡. Vui lÃ²ng thá»­ láº¡i!"
            read -p "Nháº¥n Enter Ä‘á»ƒ quay láº¡i menu..."
            ;;
    esac
done
